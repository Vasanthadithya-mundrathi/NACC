version: "3.9"

services:
  orchestrator:
    image: python:3.12-slim
    working_dir: /app
    volumes:
      - ./:/app
    command: bash -c "pip install -e . && nacc-orchestrator serve --config configs/orchestrator-three-node.yml --host 0.0.0.0 --port 8888"
    ports:
      - "8888:8888"
    environment:
      - NACC_DOCKER_LLM_CONTAINER=

  node_a:
    image: python:3.12-slim
    working_dir: /app
    volumes:
      - ./:/app
    command: bash -c "pip install -e . && nacc-node serve --config configs/node-laptop.yml --host 0.0.0.0 --port 8765"
    ports:
      - "9876:8765"

  node_b:
    image: python:3.12-slim
    working_dir: /app
    volumes:
      - ./:/app
    command: bash -c "pip install -e . && nacc-node serve --config configs/node-linux-vm.yml --host 0.0.0.0 --port 8766"
    ports:
      - "9877:8766"
